---
 layout:     post
 title:      Unreal学习笔记
 subtitle:   Unreal
 date:       2023-12-19
 author:     Bob
 header-img: img/pos_bg_unreal.jpg
 catalog: true
 tags:
     - Unreal
---

### 官方学习资料
+ [虚幻引擎官网](https://www.unrealengine.com/zh-CN/) 
+ [虚幻在线学习](https://www.unrealengine.com/zh-CN/onlinelearning-courses) 
+ [虚幻文档](https://docs.unrealengine.com/zh-CN/index.html) 
+ [虚幻论坛](https://forums.unrealengine.com/) 
+ [虚幻社区](https://dev.epicgames.com/community/)
+ [虚幻问答](https://answers.unrealengine.com/index.html) 
+ [虚幻资源](https://www.unrealengine.com/zh-CN/resources) 
+ [虚幻线路图](https://trello.com/b/TTAVI7Ny/ue4-roadmap) 
+ [虚幻源码](https://github.com/EpicGames/UnrealEngine)
+ [虚幻Youtube](https://www.youtube.com/channel/UCBobmJyzsJ6Ll7UbfhI4iwQ)
+ [虚幻B站](https://space.bilibili.com/138827797)
+ [虚幻Twitter](https://twitter.com/UnrealEngine)
+ [虚幻知乎](https://www.zhihu.com/org/xu-huan-yin-qing-24)

### 个人资源
+ [UE随笔](https://zhuanlan.zhihu.com/c_1093468071653646336)
+ [图形游戏和宅](https://zhuanlan.zhihu.com/c_1122162017141633024)
+ [UE4引擎模块学习](https://zhuanlan.zhihu.com/c_1078674745632919552)
+ [游戏开发杂谈](https://zhuanlan.zhihu.com/c_1098650036312940544)
+ [InsideUE5-大钊](https://zhuanlan.zhihu.com/c_1098650036312940544)
+ [风蚀之月](https://blog.ch-wind.com/)
+ [Virtus Learning Hub](https://www.youtube.com/channel/UCz-eYJAUgSE-mqzKtit7m9g)
+ [Matthew Palaje](https://www.youtube.com/c/MatthewPalaje)
+ [中国传媒大学动画与数字艺术学院](https://space.bilibili.com/87805098/video)
+ [UE4、UE5 游戏开发技术应用及源码原理](https://www.zhihu.com/column/c_1428323433248092160)
+ [UE4 开发从入门到入土-评论值得看](https://zhuanlan.zhihu.com/p/129689221)
+ [现代图形引擎入门指南（Unreal Engine）— 基础编程](https://italink.github.io/ModernGraphicsEngineGuide/04-UnrealEngine/0.%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/)
+ [大象无形：虚幻引擎程序设计浅析](https://book.douban.com/subject/27033749/) /[《大象无形：虚幻引擎程序设计浅析》 笔记](https://www.zhihu.com/column/c_1535217822816309248)
+ [循迹研究室 - 查利鹏](https://imzlp.com/)
+ [剖析虚幻渲染体系 - 向往](https://www.cnblogs.com/timlly/p/13512787.html)
+ [InsideUE - 大钊](https://zhuanlan.zhihu.com/p/22813908)


### 动画
+ []()

### 关卡
+ []()


### 打包
+ []()

### 构建
###### 模块
UE5最小的代码组织单位是模块

源码模块：Runtime游戏相关，游戏包体和编辑器都会用到。Developer跨平台相关和一些与游戏无关的底层逻辑。Editor编辑器相关，打包后不包含， Plugin插件相关，给编辑器提供一些扩展功能，非编辑器必须功能

###### 模块文件夹

+ Public文件夹 （用来放置*.h文件）
+  Private文件夹 （用来放置*.cpp文件）
+  *.build.cs文件 （模块构建配置文件，也可配它依赖哪些模块）
+  插件的模块用*.uplugin配置引入

###### *.Target.cs、TargetRules
T*.arget.cs中Type参数大概有如下五种值：Program是独立程序，可以脱离UE独立使用，EditorEditor是附带UE5编辑器的程序，Game是发布给玩家的游戏包体的程序，另外还有Client，Server。

LinkType参数： Modular默认，每个模块一个dll，例如UnrealPak.exe，UnrealEdito.exe的LinkType也是Modular的。Monolithic 所有模块都编入一个Exe中，例如BlankProgram。

######  UnrealBuildTool
UBT:代码在Engine\Source\Programs\UnrealBuildTool，exe文件位于Engine\Binaries\DotNET\UnrealBuildTool目录。它是虚幻引擎的构建工具，它主要负责分析build.cs和Target.cs等配置文件，并把虚幻的*.h和*.cpp文件编译并链接为二进制可执行文件exe/dll。

+ Scans solution directory for modules and plug-ins
+ Determines all modules that need to be rebuilt
+ Invokes UHT to parse C++ headers
+ Creates compiler & linker options from .Build.cs & .Target.cs
+ Executes platform specific compilers (VisualStudio, LLVM)

UBT还可生成项目解决方案，选择uproject右键Generate Visual Studio project file

UBT可用命令行编译一个UE5的项目

######  UnrealHeaderTool
UHT:虚幻引擎的头文件工具，主要负责解析各个头文件，并分析其中的有UCLASS()，USTRUCT()等前缀的类，以及UFUNCTION()等前缀的函数，并且把这些类与函数等信息通过生成(*.generate.h)等代码反射给蓝图使用

+ Parses all C++ headers containing UClasses
+ Generates glue code for all Unreal classes & functions
+ Generated files stored in Intermediates directory

UnrealBuildTool.exe依赖部分引擎代码

### 优化
+ []()

### 物理
+ []()

### 渲染
+ []()

### UI
+ []()

### 蓝图
+ []()

### C++/引擎源码
###### 资料
+ [C++编程教程](https://docs.unrealengine.com/5.3/zh-CN/unreal-engine-cpp-programming-tutorials/)

###### UClass、UPROPERTY、UPROPERTY、UFUNCTION
类名上方需要加入UClass()宏，类体的第一行需要添加GENERAED_BODY()宏，主要是为了实现类的反射用。UPROPERTY宏把成员变量注册到蓝图，通过UFUNCTION宏把函数注册到蓝图

###### 引擎初始化
WinMain->GuadedMain->[EngineLoop.PreInit()-EngineLoop.Init()-EngineLoop.Tick()-EngineLoop.Exit()]

###### 工具类
正则表达式 Regex.h

FPaths路径管理器

XML：可以使用FastXML与FXmlFile进行解析与处理

Json：可以使用FJsonSerializer与FJsonValue等来进行解析与处理。

ini：使用GConfig类进行读写与解析。

文件读写与访问:FPlatformFileManager::Get()->GetPlatformFile()

Log:UE_LOG(LogMy, Warning, TEXT("Ocean"));

FName：无法修改，大小写不敏感，其实FName内部只是一个整数索引，实际的字符串内容是在一个公用的字符串表中保存，非常省内存。

FText：无法修改，用来显示，支持本地化和多国语言。

FString：允许修改，区分大小写。最为灵活，不过比其他两种字符串，略为耗一些内存。

### 构架
###### UObject
UObject：垃圾收集、反射、序列化、与编辑器交互、运行时类型识别、网络复制
###### Actor、Pawn、Character、Controller
Actor：能够被挂载组件
Pawn：提供了被“操作”的特性
Character:继承自Pawn，提供了Character Movement组件（移动、跳跃、蹲伏、爬行）
Controller:是用来操控Pawn/Character的人,Player Controller控制角色，AI Controller来NPC、Monster

### 项目结构

文件目录：

+ Binaries:存放编译生成的结果二进制文件。该目录可以gitignore,反正每次都会生成。
+ Config:配置文件。
+ Content:平常最常用到，所有的资源和蓝图等都放在该目录里。
+ DerivedDataCache：“DDC”，存储着引擎针对平台特化后的资源版本。比如同一个图片，针对不同的平台有不同的适合格式，这个时候就可以在不动原始的uasset的基础上，比较轻易的再生成不同格式资源版本。gitignore。
+ Intermediate：中间文件（gitignore），存放着一些临时生成的文件。有：

Build的中间文件，.obj和预编译头等

UHT预处理生成的.generated.h/.cpp文件

VS.vcxproj项目文件，可通过.uproject文件生成编译生成的Shader文件。

+ AssetRegistryCache：Asset Registry系统的缓存文件，Asset Registry可以简单理解为一个索引了所有uasset资源头信息的注册表。CachedAssetRegistry.bin文件也是如此。
+ Saved：存储自动保存文件，其他配置文件，日志文件，引擎崩溃日志，硬件信息，烘培信息数据等。gitignore
+ Source：代码文件。

### 编辑器扩展
[调教UE5：编辑器拓展指南](https://www.zhihu.com/column/c_1363944783237570560)

### 脚本
+ [puerts](https://github.com/Tencent/puerts/tree/master)
+ [Unreal Engine Angelscript](https://angelscript.hazelight.se/)
+ [Unreal Engine Angelscript-ZH](https://docs.angelscript-ue.g1sgame.com/)
+ [UnLua](https://github.com/Tencent/UnLua)

### 官方联系渠道
+ 虚幻社区邮箱：egc-community@epicgames.com
+ 官方商务邮箱：egc-business@epicgames.com
+ 大钊QQ:2722937652
+ 虚幻引擎公众号：unrealengine

