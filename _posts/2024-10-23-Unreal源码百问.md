---
 layout:     post
 title:      Unreal源码百问
 subtitle:   Unreal
 date:       2024-10-23
 author:     Bob
 header-img: img/pos_bg_unreal.jpg
 catalog: true
 tags:
     - Unreal
---


### 如何识别引擎和插件DLL编译不匹配
检查调用堆栈
```c
int32 GuardedMain( const TCHAR* CmdLine )
EnginePreInit( CmdLine );
int32 FEngineLoop::PreInit(const TCHAR* CmdLine)
int32 FEngineLoop::PreInitPreStartupScreen(const TCHAR* CmdLine)
bool FEngineLoop::AppInit( )
ProjectManager.CheckModuleCompatibility(IncompatibleFiles);
PluginManager.CheckModuleCompatibility(IncompatibleFiles, IncompatibleEngineFiles);
FModuleDescriptor::CheckModuleCompatibility(CurrentProject->Modules, OutIncompatibleModules);
ModuleManager.IsModuleUpToDate(Module.Name)
FModuleManifest::TryRead(FileName, Manifest)
```
通过***.modules文件记录编译信息，格式如下
{
	"BuildId": "488e2f37-bf07-4f46-8a3e-5e5a4141fbac",
	"Modules": 
	{
		"ShootLikeMe": "UnrealEditor-ShootLikeMe.dll",
		"ShootLikeMeEditor": "UnrealEditor-ShootLikeMeEditor.dll"
	}
}
TryRead中比较BuildId是否匹配，最后IsModuleUpToDate中检查Modules中的Dll是否存在
